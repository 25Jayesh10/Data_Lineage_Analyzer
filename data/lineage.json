{
  "AcmeERP.usp_CalculateFifoCost": {
    "type": "procedure",
    "calls": [],
    "tables": [
      "AcmeERP.StockMovements",
      "CTE_FIFO"
    ]
  },
  "CTE_FIFO": {
    "type": "table",
    "calls": [
      "AcmeERP.usp_CalculateFifoCost"
    ],
    "columns": [
      {
        "name": "AVG(UnitCost) AS FifoCostEstimate",
        "usage": "read",
        "calling_procedure": "AcmeERP.usp_CalculateFifoCost"
      }
    ]
  },
  "AcmeERP.usp_ProcessFullPayrollCycle": {
    "type": "procedure",
    "calls": [],
    "tables": [
      "#PayrollCalc",
      "ACMEERP.EXCHANGERATES",
      "AcmeERP.Employees",
      "AcmeERP.ExchangeRates",
      "AcmeERP.PayrollLogs"
    ]
  },
  "AcmeERP.PayrollLogs": {
    "type": "table",
    "calls": [
      "AcmeERP.usp_ProcessFullPayrollCycle"
    ],
    "columns": [
      {
        "name": "EmployeeID",
        "usage": "write",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      },
      {
        "name": "PayPeriodStart",
        "usage": "write",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      },
      {
        "name": "PayPeriodEnd",
        "usage": "write",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      },
      {
        "name": "GrossSalary",
        "usage": "write",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      },
      {
        "name": "TaxDeducted",
        "usage": "write",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      }
    ]
  },
  "AcmeERP.ExchangeRates": {
    "type": "table",
    "calls": [
      "AcmeERP.usp_ConvertToBase",
      "AcmeERP.usp_ProcessFullPayrollCycle"
    ],
    "columns": [
      {
        "name": "RateToBase",
        "usage": "read",
        "calling_procedure": "AcmeERP.usp_ConvertToBase"
      },
      {
        "name": "TOP 1 RateToBase",
        "usage": "read",
        "calling_procedure": "AcmeERP.usp_ConvertToBase"
      },
      {
        "name": "AVG(RateToBase)",
        "usage": "read",
        "calling_procedure": "AcmeERP.usp_ConvertToBase"
      }
    ]
  },
  "#PayrollCalc": {
    "type": "table",
    "calls": [
      "AcmeERP.usp_ProcessFullPayrollCycle"
    ],
    "columns": [
      {
        "name": "EmployeeID",
        "usage": "write",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      },
      {
        "name": "BaseSalary",
        "usage": "write",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      },
      {
        "name": "Bonus",
        "usage": "write",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      },
      {
        "name": "GrossSalary",
        "usage": "write",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      },
      {
        "name": "Tax",
        "usage": "write",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      },
      {
        "name": "NetSalary",
        "usage": "write",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      },
      {
        "name": "Currency",
        "usage": "write",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      },
      {
        "name": "ConvertedSalary",
        "usage": "write",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      },
      {
        "name": "EmployeeID",
        "usage": "read",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      },
      {
        "name": "@PayPeriodStart",
        "usage": "read",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      },
      {
        "name": "@PayPeriodEnd",
        "usage": "read",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      },
      {
        "name": "ConvertedSalary",
        "usage": "read",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      },
      {
        "name": "Tax",
        "usage": "read",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      }
    ]
  },
  "AcmeERP.usp_ConvertToBase": {
    "type": "procedure",
    "calls": [],
    "tables": [
      "AcmeERP.ExchangeRates"
    ]
  },
  "AcmeERP.StockMovements": {
    "type": "table",
    "calls": [
      "AcmeERP.usp_CalculateFifoCost"
    ],
    "columns": [
      {
        "name": "MovementID",
        "usage": "read",
        "calling_procedure": "AcmeERP.usp_CalculateFifoCost"
      },
      {
        "name": "ProductID",
        "usage": "read",
        "calling_procedure": "AcmeERP.usp_CalculateFifoCost"
      },
      {
        "name": "Quantity",
        "usage": "read",
        "calling_procedure": "AcmeERP.usp_CalculateFifoCost"
      },
      {
        "name": "UnitCost",
        "usage": "read",
        "calling_procedure": "AcmeERP.usp_CalculateFifoCost"
      },
      {
        "name": "SUM(Quantity) OVER (PARTITION BY ProductID ORDER BY MovementDate ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) AS RunningTotal",
        "usage": "read",
        "calling_procedure": "AcmeERP.usp_CalculateFifoCost"
      }
    ]
  },
  "AcmeERP.Employees": {
    "type": "table",
    "calls": [
      "AcmeERP.usp_ProcessFullPayrollCycle"
    ],
    "columns": [
      {
        "name": "e.EmployeeID",
        "usage": "read",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      },
      {
        "name": "e.BaseSalary",
        "usage": "read",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      },
      {
        "name": "Bonus",
        "usage": "read",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      },
      {
        "name": "GrossSalary",
        "usage": "read",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      },
      {
        "name": "Tax",
        "usage": "read",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      },
      {
        "name": "NetSalary",
        "usage": "read",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      },
      {
        "name": "ISNULL(e.Currency, 'USD') AS Currency",
        "usage": "read",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      }
    ]
  },
  "ACMEERP.EXCHANGERATES": {
    "type": "table",
    "calls": [
      "AcmeERP.usp_ProcessFullPayrollCycle"
    ],
    "columns": [
      {
        "name": "TOP 1 RateToBase",
        "usage": "read",
        "calling_procedure": "AcmeERP.usp_ProcessFullPayrollCycle"
      }
    ]
  }
}